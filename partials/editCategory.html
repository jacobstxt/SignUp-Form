<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slugify@1.6.0/slugify.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="/css/style.css" rel="stylesheet" />
    <title>Edit</title>
</head>
<body>
    <script src="/js/site.js"></script>

    <link href="/css/cropper.min.css" rel="stylesheet" />
    <script src="/js/cropper.min.js"></script>

    <script>loadDOM('/partials/NavBar.html');</script>
    <script>loadDOM('/partials/asideAdminPanel.html');</script>
    <script>loadDOM('/partials/loading.html')</script>
    <br />
    <div id="addCategoryPage" class="Category">
        <div class="relative bg-white rounded-lg shadow-sm">

            <form class="p-4 md:p-5" action="#" id="categoryForm">
                <div class="grid gap-4 mb-4 grid-cols-[150px_auto]">
                    <img id="avatar" style="width:120px; height:120px; margin:auto auto 5px auto;border:2px solid gray" class="rounded-full" src="/images/icon-img.png" alt="Bordered avatar">

                    <button id="chooseBT" data-modal-target="photoModal" data-modal-toggle="photoModal" style="margin-right:60px; margin-top:30px; cursor:pointer; width:150px;" class="btn-editStyle block text-white bg-blue-500  focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center " type="button">
                        Choose icon
                    </button>
                </div>

                <div class="grid gap-4 mb-4 grid-cols-2">

                    <div class="col-span-2">
                        <label id="imageError" class="error text-sm block w-full"></label>
                    </div>
                    <div class="col-span-2">
                        <label for="name" class="label-style block mb-2 text-sm font-medium text-gray-900">Title</label>
                        <input oninput="updateSlug()" type="text" name="name" id="name" class="input-style" placeholder="Type category name" required="">
                    </div>

                    <div class="col-span-2">
                        <label for="slug" class="label-style block mb-2 text-sm font-medium text-gray-900">URL Slug</label>
                        <input type="text" disabled name="slug" id="slug" class="input-style" placeholder="Generated urlSlug">
                    </div>
                    <div class="col-span-2">
                        <label hidden id="slugError" class="error block w-full"></label>
                    </div>
                    <div class="col-span-2">
                        <label for="priority" class="label-style block mb-2 text-sm font-medium text-gray-900">Priority</label>
                        <input type="number" name="priority" id="priority" class="input-style" placeholder="1" required="">
                    </div>
                </div>

                <div class="flex items-center justify-center gap-4">
                    <button id="editBtn" style="cursor:pointer;width:150px" class="btn-editStyle text-white inline-flex items-center bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                        <svg class="me-1 -ms-1 w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                        Edit category
                    </button>

                    <button onclick="window.location.href='/pages/admin/AdminPanel.html'" style="cursor: pointer; width: 120px" class="btn-editStyle text-white inline-flex items-center bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
                        Cancel
                    </button>
                </div>

                <br/><br />
                <div id="pbContainer" hidden class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                    <div id="categoryPB" class="bg-pink-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </form>
        </div>
    </div>

    <script>function updateSlug() {
            const name = document.getElementById('name').value;
            let slug = slugify(name);
            slug = slug.toLowerCase();
            slug = slug.replace(/[@#$']/g, '');
            document.getElementById('slug').value = slug;
            }




    </script>

    <script>loadDOM('/partials/modal_photo.html')</script>
    <script src="/js/editCategory.js"></script>
</body>
</html>